+function($){"use strict";var AutoPager=function(element,options){this.options=options;this.$el=$(element);this.init()};AutoPager.DEFAULTS={};AutoPager.prototype.init=function(){this.$el.on("inview",$.proxy(this.onViewChange,this))};AutoPager.prototype.onViewChange=function(event,isInView){var $el=this.$el,currentPage=$el.data("current-page"),lastPage=$el.data("last-page"),isComplete=currentPage>=lastPage;$el.toggle(!isComplete);if(isComplete||$el.hasClass("pager-is-loading")){return}if(isInView){currentPage++;$el.addClass("pager-is-loading").data("request-data",{page:currentPage}).request().done(function(){$el.data("current-page",currentPage).removeClass("pager-is-loading")})}};var old=$.fn.autoPager;$.fn.autoPager=function(option){var args=Array.prototype.slice.call(arguments,1),result;this.each(function(){var $this=$(this);var data=$this.data("oc.autopager");var options=$.extend({},AutoPager.DEFAULTS,$this.data(),typeof option=="object"&&option);if(!data)$this.data("oc.autopager",data=new AutoPager(this,options));if(typeof option=="string")result=data[option].apply(data,args);if(typeof result!="undefined")return false});return result?result:this};$.fn.autoPager.Constructor=AutoPager;$.fn.autoPager.noConflict=function(){$.fn.autoPager=old;return this};$(document).render(function(){$('[data-control="auto-pager"]').autoPager()})}(window.jQuery);(function(factory){if(typeof define=="function"&&define.amd){define(["jquery"],factory)}else if(typeof exports==="object"){module.exports=factory(require("jquery"))}else{factory(jQuery)}})(function($){var inviewObjects=[],viewportSize,viewportOffset,d=document,w=window,documentElement=d.documentElement,timer;$.event.special.inview={add:function(data){inviewObjects.push({data:data,$element:$(this),element:this});if(!timer&&inviewObjects.length){timer=setInterval(checkInView,250)}},remove:function(data){for(var i=0;i<inviewObjects.length;i++){var inviewObject=inviewObjects[i];if(inviewObject.element===this&&inviewObject.data.guid===data.guid){inviewObjects.splice(i,1);break}}if(!inviewObjects.length){clearInterval(timer);timer=null}}};function getViewportSize(){var mode,domObject,size={height:w.innerHeight,width:w.innerWidth};if(!size.height){mode=d.compatMode;if(mode||!$.support.boxModel){domObject=mode==="CSS1Compat"?documentElement:d.body;size={height:domObject.clientHeight,width:domObject.clientWidth}}}return size}function getViewportOffset(){return{top:w.pageYOffset||documentElement.scrollTop||d.body.scrollTop,left:w.pageXOffset||documentElement.scrollLeft||d.body.scrollLeft}}function checkInView(){if(!inviewObjects.length){return}var i=0,$elements=$.map(inviewObjects,function(inviewObject){var selector=inviewObject.data.selector,$element=inviewObject.$element;return selector?$element.find(selector):$element});viewportSize=viewportSize||getViewportSize();viewportOffset=viewportOffset||getViewportOffset();for(;i<inviewObjects.length;i++){if(!$.contains(documentElement,$elements[i][0])){continue}var $element=$($elements[i]),elementSize={height:$element[0].offsetHeight,width:$element[0].offsetWidth},elementOffset=$element.offset(),inView=$element.data("inview");var currentPage=$element.data("current-page"),lastPage=$element.data("last-page"),isComplete=currentPage>=lastPage;$element.toggle(!isComplete);if(!viewportOffset||!viewportSize){return}var offsetTop=$element.data("offset");offsetTop=offsetTop?offsetTop:0;if(elementOffset.top+elementSize.height>viewportOffset.top&&(elementOffset.top<viewportOffset.top+viewportSize.height+offsetTop||elementOffset.top<viewportOffset.top+viewportSize.height)&&elementOffset.left+elementSize.width>viewportOffset.left&&elementOffset.left<viewportOffset.left+viewportSize.width){if(!inView){$element.data("inview",true).trigger("inview",[true])}}else if(inView){$element.data("inview",false).trigger("inview",[false])}}}$(w).bind("scroll resize scrollstop",function(){viewportSize=viewportOffset=null});if(!documentElement.addEventListener&&documentElement.attachEvent){documentElement.attachEvent("onfocusin",function(){viewportOffset=null})}});